
  <!DOCTYPE html><meta charset=UTF-8>
  <style>.node rect{cursor:pointer;fill:#fff;fill-opacity:.5;stroke:#3182bd;stroke-width:1.5px;}
  .node text{font:10px sans-serif;pointer-events:none;}
  path.link{fill:none;stroke:#9ecae1;stroke-width:1.5px;}
  .control.glyphicon{position:static;color:#4A4C4F;font-family:"Oxygen", sans-serif;cursor:pointer;}
  .scrollbox{height: 120px;border: 1px solid #e5e5e5;overflow: scroll;}
  .bar{fill: steelblue;}.axis{font: 10px sans-serif;}.axis path,.axis line{fill: none; stroke: #000;
  shape-rendering: crispEdges;}.x.axis path{display: none;}</style>
  <link href="https://fonts.googleapis.com/css?family=Oxygen" rel=stylesheet type="text/css">
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel=stylesheet>
  <title>STM Visualization</title><body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script>var margin={top:30,right:20,bottom:30,left:20},width=window.innerWidth/1.5-margin.left-margin.right,height=window.innerHeight-margin.top-margin.bottom,barHeight=20,barWidth=width*.8;
  var i=0,duration=400,root;var tree=d3.layout.tree().nodeSize([0,20]);var diagonal=d3.svg.diagonal().projection(function(d){return[d.y,d.x];});
  var svg=d3.select("body").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");
  root= {"children":[{"name":["digit, research, project, will, collect, cours, student"],"children":[{"name":["websit, digit, neh, project, onlin, grant, metadata"],"size":[1800],"topic_no":[3],"thought_1":[],"thought_2":[],"prob":["project, digit, collect, research, archiv, websit, univers"],"frex":["websit, digit, neh, project, onlin, grant, metadata"],"lift":["perseus, unavail, datch, muybridg, rehous, start-, cms"],"score":["digit, project, websit, unavail, neh, user, librari"],"proportion":["0.13"]},{"name":["cours, student, will, learn, teach, teacher, podcast"],"size":[1800],"topic_no":[11],"thought_1":[],"thought_2":[],"prob":["will, student, cours, histori, learn, use, studi"],"frex":["cours, student, will, learn, teach, teacher, podcast"],"lift":["cluster, first-year, kurdish, semest, podcast, graduate-level, -class"],"score":["student, cluster, will, cours, learn, podcast, teach"],"proportion":["0.07"]}],"topic_no":[3,11]},{"name":["edit, manuscript, copi, translat, journal, publish, editor"],"size":[1800],"topic_no":[4],"thought_1":[],"thought_2":[],"prob":["edit, text, manuscript, book, publish, work, volum"],"frex":["edit, manuscript, copi, translat, journal, publish, editor"],"lift":["assyria, beckett, bullfight, burnss, calendr, cd-rom, data-bank"],"score":["edit, manuscript, copi, translat, text, volum, publish"],"proportion":["0.08"]},{"name":["site, data, archaeolog, excav, languag, use, ancient"],"children":[{"name":["archaeolog, languag, dictionari, linguist, coptic, excav, morpholog"],"size":[1800],"topic_no":[1],"thought_1":[],"thought_2":[],"prob":["languag, archaeolog, use, site, data, result, word"],"frex":["archaeolog, languag, dictionari, linguist, coptic, excav, morpholog"],"lift":["amith, edfu, epipalaeolith, faunal, fortif, klallam, lidar"],"score":["archaeolog, languag, encycloped, excav, dictionari, morpholog, data"],"proportion":["0.06"]},{"name":["que, las, est, una, por, como, para"],"size":[1800],"topic_no":[17],"thought_1":[],"thought_2":[],"prob":["los, que, del, las, angel, tomb, burial"],"frex":["que, las, est, una, por, como, para"],"lift":["que, amarna, amrica, archivo, caar, caari, cmo"],"score":["que, los, las, por, del, como, christina"],"proportion":["0.01"]}],"topic_no":[1,17]},{"name":["practic, law, way, social, argu, theori, human"],"children":[{"name":["philosophi, philosoph, law, moral, legal, reason, kant"],"size":[1800],"topic_no":[8],"thought_1":[],"thought_2":[],"prob":["law, philosoph, philosophi, argu, theori, moral, legal"],"frex":["philosophi, philosoph, law, moral, legal, reason, kant"],"lift":["coas, theorem, eleat, gorgia, husserl, introspectionist, neo-babylonian"],"score":["law, philosoph, philosophi, kant, plato, legal, aristotl"],"proportion":["0.06"]},{"name":["medic, disabl, anim, medicin, bodi, rhetor, valu"],"size":[1800],"topic_no":[18],"thought_1":[],"thought_2":[],"prob":["social, practic, studi, way, cultur, form, use"],"frex":["medic, disabl, anim, medicin, bodi, rhetor, valu"],"lift":["biomed, fascist, nutrit, clinician, neurosci, disabl, adorno"],"score":["fascist, medic, disabl, theori, scienc, patient, clinic"],"proportion":["0.06"]}],"topic_no":[8,18]},{"name":["islam, mediev, earli, religi, centuri, christian, histori"],"children":[{"name":["cathol, oconnor, saint, theolog, roman, mediev, monasteri"],"size":[1800],"topic_no":[2],"thought_1":[],"thought_2":[],"prob":["religi, mediev, centuri, christian, earli, roman, church"],"frex":["cathol, oconnor, saint, theolog, roman, mediev, monasteri"],"lift":["augustus, carolingian, flanneri, oconnor, twelfth-centuri, disgust, emmett"],"score":["mediev, christian, augustus, religi, roman, cathol, oconnor"],"proportion":["0.04"]},{"name":["islam, ottoman, china, muslim, arab, buddhist, mediterranean"],"size":[1800],"topic_no":[19],"thought_1":[],"thought_2":[],"prob":["islam, ottoman, religi, cultur, muslim, centuri, histori"],"frex":["islam, ottoman, china, muslim, arab, buddhist, mediterranean"],"lift":["sinhala, cascad, kmms, marathi, sri, lanka, tibetan"],"score":["islam, ottoman, muslim, china, cascad, arab, buddhist"],"proportion":["0.04"]}],"topic_no":[2,19]},{"name":["women, modern, literatur, poetri, essay, earli, literari"],"children":[{"name":["shakespear, poetri, essay, ballad, poetic, poet, literari"],"size":[1800],"topic_no":[6],"thought_1":[],"thought_2":[],"prob":["essay, literari, literatur, earli, modern, poetri, play"],"frex":["shakespear, poetri, essay, ballad, poetic, poet, literari"],"lift":["czech, dramatist, videograph, sousa, tempest, macbeth, euripid"],"score":["shakespear, videograph, essay, poetri, literari, ballad, poem"],"proportion":["0.05"]},{"name":["gender, sexual, femal, memori, women, german, holocaust"],"size":[1800],"topic_no":[20],"thought_1":[],"thought_2":[],"prob":["women, gender, memori, histor, social, examin, femal"],"frex":["gender, sexual, femal, memori, women, german, holocaust"],"lift":["travelogu, carcer, bedouin, trauma, holocaust, remembr, masculin"],"score":["women, gender, travelogu, memori, sexual, femal, holocaust"],"proportion":["0.03"]}],"topic_no":[6,20]},{"name":["opera, jazz, musician, compos, music, danc, bach"],"size":[1800],"topic_no":[15],"thought_1":[],"thought_2":[],"prob":["music, perform, compos, work, song, new, cultur"],"frex":["opera, jazz, musician, compos, music, danc, bach"],"lift":["alley, bandlead, broadway, cage, copland, crawford, honey"],"score":["music, opera, compos, musician, jazz, song, perform"],"proportion":["0.05"]},{"name":["artist, art, citi, histori, space, new, cultur"],"children":[{"name":["chicago, exhibit, art, paint, artist, sculptur, museum"],"size":[1800],"topic_no":[12],"thought_1":[],"thought_2":[],"prob":["art, artist, exhibit, film, museum, paint, imag"],"frex":["chicago, exhibit, art, paint, artist, sculptur, museum"],"lift":["bastianini, colombian, madam, japonism, mural, canvas, ezekiel"],"score":["art, artist, exhibit, museum, colombian, paint, film"],"proportion":["0.04"]},{"name":["jewish, space, map, urban, jew, vienna, spatial"],"size":[1800],"topic_no":[14],"thought_1":[],"thought_2":[],"prob":["space, modern, map, jewish, citi, histori, book"],"frex":["jewish, space, map, urban, jew, vienna, spatial"],"lift":["equiano, olaudah, physiognomi, propheci, nelli, piranesi, decent"],"score":["propheci, jewish, map, jew, space, urban, piranesi"],"proportion":["0.03"]}],"topic_no":[12,14]},{"name":["life, john, year, death, time, first, new"],"children":[{"name":["jesus, luther, mysteri, thurman, engin, save, later"],"size":[1800],"topic_no":[5],"thought_1":[],"thought_2":[],"prob":["later, death, life, year, new, time, stori"],"frex":["jesus, luther, mysteri, thurman, engin, save, later"],"lift":["finish, cardin, rosari, serto, winthrop, hubri, moravian"],"score":["finish, thurman, jesus, rembrandt, quran, wheatley, irish"],"proportion":["0.03"]},{"name":["adam, jefferson, presid, soviet, washington, madison, treati"],"size":[1800],"topic_no":[7],"thought_1":[],"thought_2":[],"prob":["american, new, john, soviet, volum, washington, presid"],"frex":["adam, jefferson, presid, soviet, washington, madison, treati"],"lift":["adamss, louisa, retir, defenc, espionag, monticello, pulpit"],"score":["washington, soviet, pulpit, presid, jefferson, adam, madison"],"proportion":["0.04"]}],"topic_no":[5,7]},{"name":["polit, state, war, nation, histori, american, black"],"children":[{"name":["black, white, civil, immigr, right, freedom, racial"],"size":[1800],"topic_no":[9],"thought_1":[],"thought_2":[],"prob":["american, black, right, civil, african, white, polit"],"frex":["black, white, civil, immigr, right, freedom, racial"],"lift":["abolition, hawaiian, rioux, panina, hard-won, napervill, lynch"],"score":["black, american, hawaiian, african, right, white, civil"],"proportion":["0.06"]},{"name":["veteran, newspap, local, polici, war, counti, market"],"size":[1800],"topic_no":[10],"thought_1":[],"thought_2":[],"prob":["war, state, local, nation, govern, intern, newspap"],"frex":["veteran, newspap, local, polici, war, counti, market"],"lift":["-volunt, missil, ucsb, wayn, aristot, metaphysicam, homefront"],"score":["war, local, ucsb, newspap, polici, veteran, govern"],"proportion":["0.04"]}],"topic_no":[9,10]},{"name":["peopl, global, histori, world, coloni, cultur, nativ"],"children":[{"name":["coloni, africa, trade, caribbean, nuclear, brazil, diaspora"],"size":[1800],"topic_no":[13],"thought_1":[],"thought_2":[],"prob":["coloni, global, world, nation, european, empir, america"],"frex":["coloni, africa, trade, caribbean, nuclear, brazil, diaspora"],"lift":["hecht, cake, hiroshima, nucleara, nuclearityli, prostitut, somethinga"],"score":["coloni, prostitut, nuclear, africa, global, imperi, african"],"proportion":["0.05"]},{"name":["nativ, indigen, town, plain, river, indian, valley"],"size":[1800],"topic_no":[16],"thought_1":[],"thought_2":[],"prob":["peopl, nativ, communiti, indigen, histori, american, indian"],"frex":["nativ, indigen, town, plain, river, indian, valley"],"lift":["baniwa, plain, aiari, ice, occom, gibagadinamaagoom, cather"],"score":["plain, nativ, indigen, indian, river, villag, peopl"],"proportion":["0.04"]}],"topic_no":[13,16]}],"topic_no":[3,11,4,1,17,8,18,2,19,6,20,15,12,14,5,7,9,10,13,16],"name":["Topic Correlations (k = 20)"],"this_root":[true],"summary":["A topic model with 20 topics, 7086 documents and a 7787 word dictionary."],"proportions":[0.0581,0.0384,0.1317,0.0824,0.0262,0.0529,0.0352,0.0594,0.056,0.0449,0.0714,0.0421,0.047,0.035,0.0501,0.0362,0.0125,0.0561,0.0368,0.0274]}
 
 root.x0=0;root.y0=0;update(root);function update(source){var nodes=tree.nodes(root);var height=Math.max(500,nodes.length*barHeight+margin.top+margin.bottom);
  d3.select("svg").transition().duration(duration).attr("height",height);d3.select(self.frameElement).transition().duration(duration).style("height",height+"px");nodes.forEach(function(n,i){n.x=i*barHeight;});
  var node=svg.selectAll("g.node").data(nodes,function(d){return d.id||(d.id=++i);});
  var nodeEnter=node.enter().append("g").attr("class",function(d){if(d.size){return"node leaf"}else{return"node noleaf"}}).attr("transform",function(d){return"translate("+source.y0+","+source.x0+")";}).style("opacity",1e-6);
  nodeEnter.append("rect").data(nodes).attr("y",-barHeight/2).attr("height",barHeight).attr("width",barWidth).style("fill",color).on("click",clickModal);nodeEnter.append("text").attr("dy",3.5).attr("dx",5.5).text(function(d){if (d.children){return d.name;}else{return d.topic_no + ": " + d.name;}});
  d3.selectAll("g.noleaf").append("svg:foreignObject").attr("width",20).attr("height",20).attr("y","-10px").attr("x",barWidth-15).append("xhtml:span").attr("class","control glyphicon glyphicon-minus").attr("width","30").on("click",function(d){click(d);});
  nodeEnter.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1);node.transition().duration(duration).attr("transform",function(d){return"translate("+d.y+","+d.x+")";}).style("opacity",1).select("rect").style("fill",color);
  node.exit().transition().duration(duration).attr("transform",function(d){return"translate("+source.y+","+source.x+")";}).style("opacity",1e-6).remove();
  var link=svg.selectAll("path.link").data(tree.links(nodes),function(d){return d.target.id;});link.enter().insert("path","g").attr("class","link").attr("d",function(d){var o={x:source.x0,y:source.y0};return diagonal({source:o,target:o});}).transition().duration(duration).attr("d",diagonal);
  link.transition().duration(duration).attr("d",diagonal);link.exit().transition().duration(duration).attr("d",function(d){var o={x:source.x,y:source.y};return diagonal({source:o,target:o});}).remove();nodes.forEach(function(d){d.x0=d.x;d.y0=d.y;});}
  function click(d){if(d.children){d._children=d.children;d.children=null;}else{d.children=d._children;d._children=null;}update(d);}
  function color(d){return d._children?"#3182bd":d.children?"#c6dbef":"#fd8d3c";}
  function clickModal(d){if(d.size){$("#doc1").text(d.thought_1);$("#doc2").text(d.thought_2);$("#high-prob").text("Highest Probability: "+d.prob);$("#topicModalLabel").text("Topic "+d.topic_no+" Information");$("#frex").text("FREX: "+d.frex);$("#lift").text("Lift: "+d.lift);
  $("#score").text("Score: "+d.score);$("#proportion").text(""+d.proportion);$("#modelBody").hide();$("#clusterBody").hide();$("#topicBody").show();$("#topicModal").modal("show");}else if(d.this_root){$("#topicModalLabel").text("Fitted Model Information");$("#mod1-text").text(d.summary);$("#topicBody").hide();
  $("#clusterBody").hide();$("#modelBody").show();$("#topicModal").modal("show");if ($("#barchartDiv").children().length == 2){proportionChart();}}else{$("#topicModalLabel").text("Cluster Information");$("#clust1-text").text("This cluster comprises topics "+d.topic_no.join(", ")+".");$("#topicBody").hide();$("#modelBody").hide();
  $("#clusterBody").show();$("#topicModal").modal("show");}} function proportionChart(){for(var t=window.innerHeight/3.5,a=window.innerWidth/2.5,r=35,e=35,n=root.proportions.length,o=[.5];o.length<n;)o.push(o[o.length]+1);var i=d3.select("#barchartDiv").append("svg").attr({width:a,height:t,style:"display: block; margin: auto;"}),
  l=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([0,t-r]),s=d3.scale.linear().domain([0,n]).range([0,a-e]),d=d3.scale.linear().domain([0,d3.max(root.proportions)]).range([t-r,0]),p=d3.svg.axis().scale(d).orient("left"),c=d3.svg.axis().scale(s).orient("bottom").tickValues(d3.range(.5,n+.5,1));
  i.selectAll("rect").data(root.proportions).enter().append("rect").attr({x:function(t,r){return r*(a-e)/n+e},y:function(a){return t-l(a)-r},width:(a-e)/n-1,height:l,fill:"orange"}),
  i.append("g").attr({"class":"axis",transform:"translate("+e+","+(t-r)+")"}).call(c),i.append("g").attr({"class":"axis",transform:"translate("+e+")"}).call(p),i.append("text").attr("class","x label").attr("text-anchor","middle").attr("x",a/2).attr("y",t-6).text("Topic")}</script>
  <div class="modal fade" id="topicModal" tabindex="-1" role="dialog" aria-labelledby="topicModalLabel" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="topicModalLabel">Topic Information</h4></div>
  <div class="modal-body" id="topicBody"><h5>Top Words</h5><ul id="word-list"><li id="high-prob">Highest Probability: </li><li id="frex">FREX: </li><li id="lift">Lift: </li><li id="score">Score: </li></ul><hr><h5>Representative Documents</h5>
  <div id="doc1" class="modal-body scrollbox"></div>
  <br><div id="doc2" class="modal-body scrollbox"></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="modelBody"><h5>Summary</h5><span id="mod1-text"></span><hr><div id="barchartDiv">
  <h5>Topic Proportions in Corpus</h5><br></div><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><div class="modal-body" id="clusterBody"><h5>Summary</h5><span id="clust1-text"></span><br><br><div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div></body>
